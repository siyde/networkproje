<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8"/>
  <title>Game Hub</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    :root{
      --accent:#6366f1;
      --accent-soft:rgba(99,102,241,0.18);
      --border-soft:rgba(148,163,184,0.45);
      --text:#f9fafb;
      --muted:#9ca3af;
    }
    *{
      box-sizing:border-box;
      margin:0;
      padding:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    }
    body{
      min-height:100vh;
      background:
        radial-gradient(circle at 0 0,#1f2937,#020617),
        radial-gradient(circle at 100% 100%,#4f46e5,#020617);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
      color:var(--text);
    }
    .shell{
      width:100%;
      max-width:960px;
      border-radius:28px;
      padding:22px 22px 18px;
      background:linear-gradient(135deg,rgba(15,23,42,0.96),rgba(15,23,42,0.98));
      box-shadow:
        0 24px 80px rgba(15,23,42,0.9),
        0 0 0 1px rgba(15,23,42,1);
      position:relative;
      overflow:hidden;
    }
    .shell::before,
    .shell::after{
      content:"";
      position:absolute;
      border-radius:999px;
      filter:blur(28px);
      opacity:.7;
      pointer-events:none;
      mix-blend-mode:screen;
    }
    .shell::before{
      width:260px;height:260px;
      background:radial-gradient(circle,rgba(59,130,246,.9),transparent);
      top:-90px;right:-70px;
    }
    .shell::after{
      width:220px;height:220px;
      background:radial-gradient(circle,rgba(251,146,60,.9),transparent);
      bottom:-70px;left:-50px;
    }

    .inner{
      position:relative;
      z-index:1;
      display:flex;
      flex-direction:column;
      gap:20px;
    }

    /* HERO */
    .hero{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:16px;
      flex-wrap:wrap;
    }
    .hero-main{
      max-width: 70%;
    }
    @media (max-width:720px){
      .hero-main{max-width:100%;}
      .hero{flex-direction:column;align-items:flex-start;}
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.65);
      background:rgba(15,23,42,.95);
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.13em;
      color:var(--muted);
    }
    .badge-dot{
      width:6px;height:6px;
      border-radius:999px;
      background:#22c55e;
      box-shadow:0 0 0 4px rgba(34,197,94,.4);
    }
    h1{
      margin:10px 0 4px;
      font-size:26px;
      letter-spacing:.18em;
    }
    .subtitle{
      font-size:13px;
      color:var(--muted);
    }
    .host-line{
      margin-top:8px;
      font-size:12px;
      color:var(--muted);
    }
    .host-line code{
      background:#020617;
      padding:3px 7px;
      border-radius:999px;
      border:1px solid rgba(55,65,81,.9);
      font-size:11px;
      color:#e5e7eb;
    }

    .status-wrap{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap:6px;
      font-size:11px;
      color:var(--muted);
    }
    .status-pill{
      padding:3px 9px;
      border-radius:999px;
      border:1px solid transparent;
      font-size:11px;
    }
    .status-online{
      background:#022c22;
      border-color:#16a34a;
      color:#bbf7d0;
    }
    .status-offline{
      background:#3f1c1c;
      border-color:#ef4444;
      color:#fecaca;
    }

    /* GAMES */
    .games-title{
      margin-top:6px;
      margin-bottom:8px;
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.18em;
      color:var(--muted);
    }
    .games-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:12px;
    }
    .card{
      background:radial-gradient(circle at 0 0,var(--accent-soft),rgba(15,23,42,.98));
      border-radius:18px;
      padding:12px 12px 11px;
      border:1px solid var(--border-soft);
      box-shadow:
        0 14px 38px rgba(15,23,42,.85),
        0 0 0 1px rgba(15,23,42,1);
      position:relative;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .card::after{
      content:"";
      position:absolute;
      inset:0;
      background:radial-gradient(circle at 100% 0,rgba(251,146,60,.35),transparent 55%);
      opacity:0;
      transition:opacity .2s ease;
      pointer-events:none;
    }
    .card:hover::after{opacity:1;}

    .card-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:6px;
    }
    .card-title{
      display:flex;
      align-items:center;
      gap:6px;
      font-size:16px;
      font-weight:600;
    }
    .icon-pill{
      width:24px;height:24px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:14px;
      background:#020617;
      border:1px solid rgba(148,163,184,.7);
    }
    .pill-sm{
      font-size:11px;
      padding:3px 7px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.6);
      color:var(--muted);
    }
    .card-desc{
      font-size:12px;
      color:var(--muted);
      min-height:30px;
    }
    .card-hint{
      font-size:11px;
      color:#cbd5f5;
      opacity:.9;
    }
    .meta{
      font-size:11px;
      color:var(--muted);
      display:flex;
      justify-content:space-between;
      gap:8px;
      margin-top:2px;
    }
    .meta code{
      font-size:10px;
      background:#020617;
      padding:2px 5px;
      border-radius:8px;
      border:1px solid rgba(55,65,81,.9);
    }
    .actions{
      margin-top:6px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .btn{
      cursor:pointer;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.7);
      font-size:12px;
      padding:7px 11px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      background:rgba(15,23,42,.9);
      color:#e5e7eb;
      text-decoration:none;
      transition:background .15s ease,transform .08s ease,box-shadow .12s ease;
    }
    .btn span.icon{font-size:13px;}
    .btn.primary{
      border-color:rgba(129,140,248,.95);
      background:linear-gradient(135deg,#6366f1,#f97316);
      box-shadow:
        0 10px 26px rgba(79,70,229,.8),
        0 0 0 1px rgba(15,23,42,1);
    }
    .btn.primary:hover{
      transform:translateY(-1px);
      box-shadow:
        0 14px 36px rgba(79,70,229,.95),
        0 0 0 1px rgba(15,23,42,1);
    }
    .btn.primary:active{
      transform:translateY(1px);
      box-shadow:
        0 8px 22px rgba(79,70,229,.85),
        0 0 0 1px rgba(15,23,42,1);
    }
    .btn.ghost:hover{
      background:#111827;
    }

    footer{
      margin-top:8px;
      font-size:11px;
      color:var(--muted);
      display:flex;
      justify-content:space-between;
      gap:10px;
    }
    @media (max-width:640px){
      footer{flex-direction:column;align-items:flex-start;}
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="inner">
      <!-- HERO -->
      <section class="hero">
        <div class="hero-main">
          <div class="badge">
            <span class="badge-dot"></span>
            GAME HUB
          </div>
          <h1>CLASSROOM GAMES</h1>
          <p class="subtitle">
            ArkadaÅŸlarÄ±nla aynÄ± sunucuda oynayabileceÄŸin basit ve hÄ±zlÄ± mini oyunlar:
            <strong>Pictionary</strong>, <strong>Codenames</strong> ve <strong>Tic-Tac-Toe</strong>.
          </p>
          <p class="host-line">
            Sunucu: <code id="hostText"></code>
          </p>
        </div>
        <div class="status-wrap">
          <span>Sunucu durumu</span>
          <span id="statusPill" class="status-pill status-offline">Kontrol ediliyorâ€¦</span>
        </div>
      </section>

      <!-- GAMES -->
      <section>
        <div class="games-title">Oyunlar</div>
        <div class="games-grid">
          <!-- Pictionary -->
          <article class="card">
            <div class="card-header">
              <div class="card-title">
                <div class="icon-pill">ğŸ¨</div>
                <span>Pictionary Lite</span>
              </div>
              <span class="pill-sm">Ã‡izim Â· Tahmin</span>
            </div>
            <p class="card-desc">SÄ±rayla kelime Ã§iz, diÄŸerleri tahmin etsin; skorlar anlÄ±k gÃ¼ncellensin.</p>
            <p class="card-hint">
              Oda ID oluÅŸturup arkadaÅŸlarÄ±nla paylaÅŸ. Herkes aynÄ± oda ID ile baÄŸlandÄ±ÄŸÄ±nda Ã§izimler
              gerÃ§ek zamanlÄ± olarak iletilir.
            </p>
            <div class="meta">
              <span>Oda tabanlÄ± Â· <strong>2+ oyuncu</strong></span>
              <span>URL: <code>/pictionary/</code></span>
            </div>
            <div class="actions">
              <a class="btn primary" href="/pictionary/">
                <span class="icon">â–¶</span>Oyna
              </a>
              <button class="btn ghost" type="button" onclick="copyHint('pictionary')">
                <span class="icon">â„¹ï¸</span>NasÄ±l oynanÄ±r?
              </button>
            </div>
          </article>

          <!-- Codenames -->
          <article class="card">
            <div class="card-header">
              <div class="card-title">
                <div class="icon-pill">ğŸ§ </div>
                <span>Codenames (Lite)</span>
              </div>
              <span class="pill-sm">TakÄ±m Â· Ä°pucu</span>
            </div>
            <p class="card-desc">KÄ±rmÄ±zÄ± ve Mavi takÄ±m, spymaster ipuÃ§larÄ±na gÃ¶re kelimeleri bulmaya Ã§alÄ±ÅŸÄ±r.</p>
            <p class="card-hint">
              Lobiye gir, takÄ±mÄ±nÄ± (kÄ±rmÄ±zÄ±/mavi) ve rolÃ¼nÃ¼ (spymaster/operative) seÃ§.
              Her takÄ±mda bir spymaster ve en az bir oyuncu olduÄŸunda oyun baÅŸlar.
            </p>
            <div class="meta">
              <span>TakÄ±m tabanlÄ± Â· <strong>4+ oyuncu</strong></span>
              <span>URL: <code>/codenames/</code></span>
            </div>
            <div class="actions">
              <a class="btn primary" href="/codenames/">
                <span class="icon">â–¶</span>Oyna
              </a>
              <button class="btn ghost" type="button" onclick="copyHint('codenames')">
                <span class="icon">ğŸ“‹</span>Kurallar
              </button>
            </div>
          </article>

          <!-- Tic Tac Toe -->
          <article class="card">
            <div class="card-header">
              <div class="card-title">
                <div class="icon-pill">âŒ</div>
                <span>Tic-Tac-Toe</span>
              </div>
              <span class="pill-sm">2 Oyuncu Â· SÄ±ra</span>
            </div>
            <p class="card-desc">Klasik X/O oyunu. AynÄ± oda koduyla baÄŸlanan iki oyuncu karÅŸÄ±lÄ±klÄ± oynar.</p>
            <p class="card-hint">
              AynÄ± oda kodunu giren iki oyuncu X ve O olarak eÅŸleÅŸir. Hamleler anÄ±nda karÅŸÄ± tarafa yansÄ±r.
            </p>
            <div class="meta">
              <span>1v1 Â· <strong>2 oyuncu</strong></span>
              <span>URL: <code>/ttt/</code></span>
            </div>
            <div class="actions">
              <a class="btn primary" href="/ttt/">
                <span class="icon">â–¶</span>Oyna
              </a>
              <button class="btn ghost" type="button" onclick="copyHint('ttt')">
                <span class="icon">â„¹ï¸</span>Bilgi
              </button>
            </div>
          </article>
        </div>
      </section>

      <footer>
        <span>Bu sayfa, aynÄ± sunucuda barÄ±nan mini oyunlara aÃ§Ä±lan giriÅŸ noktasÄ±dÄ±r.</span>
        <span>&copy; Game Hub</span>
      </footer>
    </div>
  </div>

  <script>
    // Host gÃ¶ster
    document.getElementById("hostText").textContent = location.host || "localhost";

    // Sunucu durumu: /rooms endpoint'i ile health check
    (function checkStatus(){
      const pill = document.getElementById("statusPill");
      fetch("/rooms")
        .then(res => {
          if(res.ok){
            pill.textContent = "ONLINE";
            pill.classList.remove("status-offline");
            pill.classList.add("status-online");
          } else {
            pill.textContent = "OFFLINE";
            pill.classList.remove("status-online");
            pill.classList.add("status-offline");
          }
        })
        .catch(() => {
          pill.textContent = "OFFLINE";
          pill.classList.remove("status-online");
          pill.classList.add("status-offline");
        });
    })();

    // KÃ¼Ã§Ã¼k "nasÄ±l oynanÄ±r" aÃ§Ä±klamalarÄ±
    function copyHint(game){
      let text = "";
      if(game === "pictionary"){
        text =
`Pictionary:
- Oda ID belirle ve arkadaÅŸlarÄ±nla paylaÅŸ.
- Herkes aynÄ± oda ID ile odaya baÄŸlanÄ±r.
- SÄ±rayla bir oyuncu Ã§izer, diÄŸerleri tahmin yazar.`;
      } else if(game === "codenames"){
        text =
`Codenames:
- Lobiye gir, kÄ±rmÄ±zÄ± veya mavi takÄ±m seÃ§.
- RolÃ¼nÃ¼ spymaster veya operative olarak belirle.
- Spymaster ipucu verir, takÄ±m arkadaÅŸlarÄ± doÄŸru kelimeleri bulmaya Ã§alÄ±ÅŸÄ±r.`;
      } else if(game === "ttt"){
        text =
`Tic-Tac-Toe:
- Ä°ki oyuncu aynÄ± oda kodunu yazar.
- Bir oyuncu X, diÄŸeri O olur.
- SÄ±rayla hamle yaparak Ã¼Ã§lÃ¼yi tamamlamaya Ã§alÄ±ÅŸÄ±rsÄ±n.`;
      }

      if(text && navigator.clipboard){
        navigator.clipboard.writeText(text)
          .then(()=>alert("KÄ±sa oyun aÃ§Ä±klamasÄ± panoya kopyalandÄ± âœ¨"))
          .catch(()=>alert(text));
      } else if(text){
        alert(text);
      }
    }
  </script>
</body>
</html>
